# <svg t="1730393408827" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1676" width="50" height="50"><path d="M512 0c-130.594133 0-236.544 101.512533-236.544 226.9184h472.951467C748.578133 101.512533 642.730667 0 512 0z m488.8576 531.899733H927.744a460.5952 460.5952 0 0 0-25.1904-110.455466l58.368-32.256a21.674667 21.674667 0 0 0 8.465067-30.3104l-28.125867-46.626134a23.6544 23.6544 0 0 0-31.573333-8.123733l-50.961067 28.228267a462.165333 462.165333 0 0 0-38.7072-53.077334H206.848A447.419733 447.419733 0 0 0 167.424 333.482667l-53.1456-29.354667a23.6544 23.6544 0 0 0-31.573333 8.123733l-28.125867 46.626134a21.674667 21.674667 0 0 0 8.465067 30.3104l60.859733 33.655466a464.0768 464.0768 0 0 0-24.7808 109.226667H23.1424a22.664533 22.664533 0 0 0-23.1424 22.186667v53.896533c0 12.288 10.3424 22.186667 23.1424 22.186667H98.986667a473.088 473.088 0 0 0 24.746666 109.226666l-60.689066 33.348267a21.674667 21.674667 0 0 0-8.465067 30.3104l28.125867 46.626133c6.382933 10.615467 20.48 14.267733 31.573333 8.123734l52.394667-29.047467c65.809067 105.2672 172.373333 178.858667 295.5264 194.901333V603.306667c0-12.288 10.3424-22.2208 23.176533-22.2208h56.046933c12.8 0 23.1424 9.898667 23.1424 22.186666V1024c122.709333-16.042667 229.000533-89.088 294.912-193.809067l50.244267 27.784534c11.0592 6.144 25.1904 2.491733 31.573333-8.123734l28.125867-46.626133a21.674667 21.674667 0 0 0-8.465067-30.3104l-58.368-32.392533c12.526933-35.054933 21.4016-71.918933 25.326934-110.455467h72.942933c12.8 0 23.1424-9.898667 23.1424-22.186667v-53.930666c0-12.151467-10.3424-22.050133-23.1424-22.050134z" p-id="1677"></path></svg> Paper Fetcher Project

> Haowei Xu
>
> Email: <haoweixu0126@163.com>

> ⚠️ 提示：在中国大陆运行该项目时，某些学术资源（如 Google Scholar）可能需要通过 VPN 才能正常访问。请确保您已配置 VPN 以避免网络访问限制。

## <svg t="1730393529609" class="icon" viewBox="0 0 1107 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3673" width="50" height="50"><path d="M600.637813 923.699317l-265.038724 53.940774 26.533029-96.218679L404.701595 728.929385l372.628701-373.211845v-291.571754A58.314351 58.314351 0 0 0 723.681093 0h-107.881549v87.471526a23.034169 23.034169 0 1 1-46.068337 0V0h-153.949886v87.471526a23.034169 23.034169 0 0 1-23.034168 23.034169 23.034169 23.034169 0 0 1-23.034169-23.034169V0H215.471526v87.471526a23.034169 23.034169 0 1 1-46.068337 0V0h-107.881549A66.186788 66.186788 0 0 0 0 61.52164V962.186788a66.186788 66.186788 0 0 0 61.52164 61.52164h654.578588A66.186788 66.186788 0 0 0 777.621868 962.186788v-215.763098zM135.872437 230.633257h469.430524a20.410023 20.410023 0 0 1 23.034169 23.034169 20.410023 20.410023 0 0 1-23.034169 23.034169H135.872437a20.410023 20.410023 0 0 1-23.034168-23.034169 20.410023 20.410023 0 0 1 23.034168-23.034169z m0 169.403189h469.430524a20.410023 20.410023 0 0 1 23.034169 23.034169 20.410023 20.410023 0 0 1-23.034169 23.034169H135.872437a20.410023 20.410023 0 0 1-23.034168-23.034169 20.410023 20.410023 0 0 1 23.034168-23.034169z m-23.034168 207.890661a20.410023 20.410023 0 0 1 23.034168-23.034169h269.412301a20.410023 20.410023 0 0 1 23.034169 23.034169 24.492027 24.492027 0 0 1-23.034169 23.034169H135.872437a20.410023 20.410023 0 0 1-23.32574-23.325741z" fill="#F9D65D" p-id="3674"></path><path d="M600.929385 923.699317l-265.330296 53.649202 69.102506-249.876993 196.22779 196.227791z" fill="#E0B873" p-id="3675"></path><path d="M439.981777 956.355353l-104.382688 21.284738 27.116173-98.259681a160.072893 160.072893 0 0 0 30.615034 47.817768 165.612756 165.612756 0 0 0 46.651481 29.157175z" fill="#4D4D4D" p-id="3676"></path><path d="M404.614123 727.850569L910.870159 221.390433l196.111162 196.052847-506.256036 506.460137z" fill="#F73434" p-id="3677"></path></svg> 功能更新日志

### 2024-11-01

* 增加 `AbstractPaperFetcher` 的保存路径配置，所有结果文件默认保存在 `results/` 文件夹中。
* 修改 `fetch_by_keywords` 方法，返回保存的论文数量以供外部程序判断成功与否。
* 增加系统退出状态码功能，用于外部调用程序可以依据退出码判断抓取是否成功：
  * `0` 表示抓取成功且保存了新论文。
  * `1` 表示未抓取到新论文或出现错误。
* 增加缓存和文件锁机制，提升文件写入效率并防止并发冲突。
* 使用 `asyncio` 进行异步调度，提高多任务并行效率。
* 动态调整 `max_results` 参数，依据调度时间自动调整抓取数量。

## 项目简介

**Paper Fetcher Project** 是一个 Python 项目，旨在从多个学术资源（例如 ArXiv、Google Scholar 和 PubMed）抓取学术论文，并提供灵活的定制选项。该项目支持定时抓取、去重机制，并可扩展至更多学术数据库。它可以作为科研工作者自动化收集学术资源的工具。

## 功能特点

* **多源数据抓取** ：
  * 支持从  **ArXiv** 、**Google Scholar** 和 **PubMed** 三个常见学术资源抓取论文数据。
  * 每个资源的抓取器模块化设计，支持通过继承 `AbstractPaperFetcher` 类，轻松添加新的学术数据库。
* **组合条件抓取** ：
  * 项目支持根据 **组合条件** 来进行精准的论文抓取，用户可以提供  **关键词** 、 **作者** 、 **年份** 、**期刊** 等多个条件进行组合查询。例如，您可以同时指定论文的关键词为 "cancer"，期刊为 "Nature"，年份为 "2020"，这样抓取器会根据这些条件抓取符合要求的论文。
  * 组合查询的条件可以灵活定制，未提供的条件将被忽略。例如，如果您只指定关键词而不指定作者，系统会根据关键词抓取所有相关的论文。
* **去重机制** ：
  * 自动检查抓取到的论文是否已经下载，基于唯一标识符（如 DOI 或 URL）实现去重，避免重复抓取同一论文。
  * 已抓取的论文 ID 会保存在 JSON 文件中，作为后续去重参考。
* **随机延迟防爬虫机制** ：
  * 抓取过程中引入了  **随机延迟** ，防止过于频繁的请求触发目标网站的反爬机制。每次抓取的延迟时间在用户定义的最小和最大延迟之间随机分配。
* **JSON 格式数据保存** ：
  * 抓取到的论文信息将以 JSON 格式保存，便于后续使用或分析。
  * 每次抓取后，新的数据会自动追加到现有的 JSON 文件中。
* **定时任务支持** ：
  * 内置定时调度功能，支持每隔固定时间间隔（如每 30 分钟）自动抓取最新的论文。
  * 还可以指定每日固定时间（如每天早上 6:00）抓取最新的论文。
* **易扩展性** ：
  * 使用面向对象的设计模式，允许用户通过继承并实现必要的方法来自定义新的数据源。
  * 各抓取模块如 `ArXivFetcher`, `GoogleScholarFetcher`, `PubMedFetcher` 都遵循统一的接口，便于扩展与维护。
* **日志记录** ：
  * 使用 Python 的 `logging` 模块进行日志记录，默认输出到控制台，帮助用户追踪抓取过程中的状态和错误。
  * 可以自定义日志级别，如 `INFO`、`DEBUG`、`ERROR` 等，以满足不同场景下的需求。

## 目录结构

```plaintext
paper_fetcher_project/
│
├── paper_fetcher/               # 核心功能模块
│   ├── __init__.py              # 初始化模块
│   ├── abstract_fetcher.py      # 抽象类及其基础方法
│   ├── arxiv_fetcher.py         # ArXiv 抓取器
│   ├── google_scholar_fetcher.py# Google Scholar 抓取器
│   ├── pubmed_fetcher.py        # PubMed 抓取器
│   └── utils.py                 # 通用工具函数 (如日志配置、去重等)
│
├── tests/                       # 单元测试
│   ├── test_arxiv_fetcher.py    # ArXiv 抓取器测试
│   ├── test_google_scholar_fetcher.py # Google Scholar 抓取器测试
│   ├── test_pubmed_fetcher.py   # PubMed 抓取器测试
│
├── requirements.txt             # 项目依赖
└── main.py                      # 运行脚本
```

## 安装指南

### 先决条件

确保您已安装以下内容：

* Python 3.7 或更高版本
* `pip`：Python 包管理工具

### 克隆仓库

首先，克隆此项目到本地：

```bash
git clone https://github.com/HowieHsu0126/RMS.git
cd paper_fetcher_project
```

### 安装依赖项

运行以下命令安装所需的 Python 包：

```bash
pip install -r requirements.txt
```

## 使用说明

### 运行示例

项目提供了多种抓取方式。以下是抓取 PubMed 论文的示例：

```bash
python main.py
```

`main.py` 文件中包含了具体的抓取配置，例如抓取的关键词、作者和年份。

### 定制抓取参数

可以通过修改 `main.py` 中的 `search_params` 来定制抓取参数。例如，抓取指定期刊和年份的论文：

```python
search_params_pm = {
    "keyword": "cancer",
    "author": "",
    "journal": "Nature",
    "year": "2020"
}
```

### 添加新的数据源

要添加新的数据源，只需继承 `AbstractPaperFetcher` 类并实现 `fetch_papers` 方法即可。

### 定时抓取任务

项目支持定时任务调度。您可以使用以下代码设置每隔 30 分钟抓取一次论文：

```python
pm_fetcher.schedule_task(search_params_pm, interval_minutes=30, max_results=5)
```

## 测试

该项目包含单元测试文件，使用 `pytest` 进行测试。

### 运行测试

安装 `pytest` 依赖：

```bash
pip install pytest
```

运行所有测试：

```bash
pytest tests/
```

## 日志和调试

项目使用 Python 内置的 `logging` 模块进行日志记录。默认日志输出到控制台。可以通过修改 `paper_fetcher/utils.py` 文件来配置日志级别。

## 项目贡献

欢迎任何形式的贡献！请确保在贡献代码前遵循以下指南：

1. **Fork 本仓库**，创建您的 feature 分支。
2. **编写清晰、可读的代码**，确保符合 PEP8 代码风格。
3. **编写测试**：所有新功能或改动都应包含适当的测试。
4. 提交 Pull Request。

## 许可证

[MIT License](https://opensource.org/licenses/MIT)
